{% extends "layout/posts.html" %}

{% block title %}新建博客{% endblock %}

{% block body %}
<div class="container">
  <div id="primary">
    <div id="content" role="main">
      <form method="post" action="/uploader" enctype="multipart/form-data">
        <input id="fileupload" type="file" name="file" value="请上传图片" />
        <input type="hidden" name="image" value="" />
        <input type="submit" value="submit" />
      </form>

      <!-- ace editor -->
      <div id="editor">## Readme</div>
      <script src="/static/plugins/ace1.2.0/ace.js" type="text/javascript" charset="utf-8"></script>
      <script>
        // http://ace.c9.io/#nav=howto
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/markdown");
        editor.getSession().on('change', function(e) {
          console.log(e);
        });
      </script>

      <!-- jquery file uploader -->
      <script src="/static/plugins/jquery_file_upload9.11.0/vendor/jquery.ui.widget.js"></script>
      <script src="/static/plugins/jquery_file_upload9.11.0/jquery.iframe-transport.js"></script>
      <script src="/static/plugins/jquery_file_upload9.11.0/jquery.fileupload.js"></script>
      <script>
      $(function () {
        $('#fileupload').fileupload({
          url: '/uploader',
          dataType: 'json',
          done: function (e, data) {
            console.dir(data);
            $(".img-view img").attr('src', data.result.url);
          }
        });
      });
      </script>

      <div class="img-view">
        <img src="">
      </div>
    </div><!-- #content .site-content -->
  </div><!-- #primary .content-area -->
</div><!-- / container-->
{% endblock %}
